var Rum=new function(){var asyncParam="",validationTimeout=10,validationReady=!0;this.init=function(e,t){asyncParam=e,validationTimeout=t},this.id=function(e){return document.getElementById(e)},this.flash=function(e,t){if(this.id("messages")){var r=document.createElement("a"),n=document.createElement("li"),i=document.createTextNode(e);n.setAttribute("class",t),r.appendChild(document.createTextNode(" dismiss")),r.setAttribute("class","dismiss"),r.setAttribute("title","Dismiss"),addListener(r,"click",function(){n.style.display="none"}),n.appendChild(i),n.appendChild(r),this.id("messages").appendChild(n)}},this.unflashAll=function(){if(this.id("messages")){var e=this.id("messages").childNodes;for(i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i])}},this.forward=function(e){location.href=e},this.getParams=function(e){var t="",r=e.getElementsByTagName("input"),n=e.getElementsByTagName("select");for(x=0;x<r.length;x++)t&&(t+="&"),t=t+r[x].getAttribute("name")+"="+r[x].getAttribute("value");for(x=0;x<n.length;x++)t&&(t+="&"),t=t+n[x].getAttribute("name")+"="+n[x].getAttribute("value");return alert(t),t},this.sendAsync=function(e,t,r){http_request=this.createXMLHttpRequest(),this.sendAsyncWithCallback(http_request,e,t,r)},this.sendSync=function(e,t,r){if(null==r&&(r="GET"),null==t&&(t=""),"GET"==r.toUpperCase()&&t)e=e.indexOf("?")>-1?e+"&"+t:e+"?"+t,t="",location.href=e;else{t=t.split("&");var n=document.createElement("form");n.action=e+"/",n.method="POST",n.style.display="none";for(var i=0;i<t.length;i++){param=t[i].split("=");var a=document.createElement("input");a.setAttribute("name",param[0]),a.setAttribute("value",param[1]),n.appendChild(a)}document.body.appendChild(n),n.submit()}},this.submit=function(e){var t=evalFormResponse;return createFrame(e,t),!0},this.sendAsyncWithCallback=function(http_request,url,params,method,callback){null==method&&(method="GET"),params?params+="&"+asyncParam+"=1":params="?"+asyncParam+"=1","GET"==method.toUpperCase()&&params&&(url=url.indexOf("?")>-1?url+"&"+params:url+"?"+params,params=""),null!=callback&&eval("http_request.onreadystatechange="+callback),http_request.open(method,url,!0),http_request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),http_request.send(params)},this.evalAsync=function(e,t,r){http_request=this.createXMLHttpRequest(),null===http_request&&console.log("browser does not support HTTP Request");var n=function(){evalHttpResponse(http_request)};this.sendAsyncWithCallback(http_request,e,t,r,n)},this.documentLoaded=function(e,t){var r=document.getElementById(t)?document.getElementById(t):"",n=null;if(r.contentDocument)n=r.contentDocument;else{if(!r.contentWindow)return;n=r.contentWindow.document}"about:blank"!=n.location.href&&r.completeCallback(e,n.body.textContent)},this.assert=function(e,t){this.id(e)&&(-1===this.id(e).className.indexOf(" invalid")&&(this.id(e).className=this.id(e).className+" invalid"),setText(this.id(e+"__err"),t)),this.reset()},this.clear=function(e){this.id(e)&&(this.id(e+"__err")&&(this.id(e+"__err").style.display="none"),this.id(e).className=this.id(e).className.replace(" invalid","")),this.reset()},this.reset=function(){validationReady=!1,window.setTimeout("setValidationReady()",validationTimeout)},this.isReady=function(e){return hasText(this.id(e))?validationReady:!1},this.createXMLHttpRequest=function(){if(window.XMLHttpRequest)http_request=new XMLHttpRequest,http_request.overrideMimeType&&http_request.overrideMimeType("text/html");else if(window.ActiveXObject)try{http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return http_request?http_request:(alert("Cannot create XMLHTTP instance"),!1)},setValidationReady=function(){validationReady=!0},getHttpResponse=function(e){if(e&&4==e.readyState){if(200==e.status)return response=e.responseText;throw"Problem retrieving XML data"}},evalHttpResponse=function(http_request){eval(getHttpResponse(http_request))},evalFormResponse=function(formElement,response){eval(response),formElement.removeChild(Rum.id(formElement.getAttribute("id")+"__async")),formElement.setAttribute("target","")},createFrame=function(e,t){var r="f"+Math.floor(99999*Math.random()),n=document.createElement("DIV"),i=document.getElementById(e.getAttribute("id")+"__async_postback");i&&i.parentNode.removeChild(i),n.id=e.getAttribute("id")+"__async_postback",n.innerHTML='<iframe style="display:none" src="about:blank" id="'+r+'" name="'+r+'" onload="Rum.documentLoaded(Rum.id(\''+e.getAttribute("id")+"'), '"+r+"'); return true;\"></iframe>",document.body.appendChild(n);var a=document.getElementById(r);a.completeCallback=t;var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",asyncParam),o.setAttribute("value","1"),o.setAttribute("id",e.getAttribute("id")+"__async"),e.appendChild(o),e.setAttribute("target",r)},setText=function(e,t){if(e){if(e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild);var r=document.createElement("span");t.length>0?(r.appendChild(document.createTextNode(t)),e.style.display="block"):(r.appendChild(document.createTextNode("")),e.style.display="none"),e.appendChild(r)}},hasText=function(e){return e&&e.hasChildNodes()&&e.childNodes.length>=1&&e.childNodes[0].textContent.length>0?!0:null},addListener=function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}};